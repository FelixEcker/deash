<html><head><title>deash Specification </title></head><body><style>
* {
  font-family: georgia, serif;
  text-align: left;
}

div {
  max-width: 33em;
  width: 50%;
  margin: auto;
  padding: 10px;
}

div>div {
  width: 100%;
}

h1 {
  text-align: center;
  font-size: 320%;
  line-height: 1.35;
  font-style: normal;
  margin: 1.5em 0 0.8em;
}

h2 {
  text-align: center;
  font-weight: bold;
  font-size: 200%;
  margin: 1em 0 0.8em;
}

h3 {
  text-align: center;
  font-weight: normal;
  text-transform: uppercase;
  font-size: 150%;
  letter-spacing: 0.15em;
  margin: 1.75em 0 0.8em;
}

h4 {
  text-align: center;
  font-style: italic;
  font-weight: normal;
}

.coldefault {
  color: black;
}

.colblack {
  color: black;
}

.colred {
  color: red;
}

.colgreen {
  color: green;
}

.colbrown {
  color: brown;
}

.colblue {
  color: blue;
}

.colmagenta {
  color: magenta;
}

.colcyan {
  color: cyan;
}

.collightgray {
  color: lightgray;
}

.colrichcolors {
}

.reset {
  color: black;
}

.colwhite {
  color: white;
}

.stlbold {
  font-weight: bold;
}

.stlitalic {
  font-style: italic;
}

.stlunderline {
  text-decoration: underline;
}

.stlstrike {
  text-decoration: line-through;
}

.strloverline {
  text-decoration: overline;
}

.stlfraktur {
  font-family: "Courier New", monospace;
  font-size: 90%;
  display: inline-block;
  width: 100%;
  padding-left: 10px;
  padding-bottom: 10px;
  background-color: #ECECEC;
  border-radius: 4px;
}
</style><center>
<h1>deash Specification </h1><h4>FelixEckert, 05-01-2022</h4>

 <br>

<div id="contents">

<h2>Contents </h2>

  1. Parsing Commands <br>

  2. Script Syntax <br>

  3. Builtin Commands & Procedures <br>

</div>


 <br>

<div id="parsing">

<h2>Parsing Commands </h2>

 <br>

This section specifies how Commands should be parsed, this includes: <br>

  1. Invoke-Search-Order <br>

  2. Piping and chaining Commands <br>

  3. C-Style String-Escaping <br>

  4. Reserved Characters & Keywords <br>

 <br>

<div id="invoke-search-order">

<h3>Invoke-Search-Order </h3>

 <br>

The Invoke-Search-Order specifies which places are searched in what order <br>

for the specific Invoke. An Invoke means a binary, alias or exported procedures. <br>

 <br>

By Default deash searches the following places in this order: <br>

  1. Preffered Exported Procedures <br>

  2. Aliases <br>

  3. /bin <br>

  4. /usr/bin <br>

  5. Exported Procedures <br>

</div>


<div id="pipes-chains">

<h3>Piping and chaining Commands </h3>

 <br>

Just like bash, deash supports piping and chaining commands. By default this <br>

is implemented using the Pipe and Chain functions, however the standardlibrary <br>

implements macros to allow for bash-style syntax for this. <br>

 <br>

<span class="stlbold">Pipe procedure </span><span class="stlfraktur"><br>

  Pipe(source_command: String; dest_command: String; pipe_mode: Integer); </span><br>

 <br>

<span class="stlbold">Chain / Sequence procedure </span><span class="stlfraktur"><br>

  Seq(first_command: String; second_command: String; chain_condition: Integer); </span><br>

</div>


<div id="string-escaping">

<h3>C-Style String-Escaping </h3>

 <br>

deash supports escaping Reserved Characters as well as White-Spaces and the backslash <br>

using the backslash.  <br>

</div>


<div id="reserved-characters-keywords">

<h3>Reserved Characters & Keywords </h3>

 <br>

This section details a list of reserved characters and keywords alongside what they are <br>

used for. <br>

 <br>

<span class="stlunderline">Characters </span><br>

<span class="stlbold"># </span><br>

  Make a Line Comment <br>

 <br>

<span class="stlbold">{ </span><br>

  Open a Block-Comment <br>

 <br>

<span class="stlbold">} </span><br>

  Close a Block-Comment <br>

 <br>

<span class="stlbold">> </span><br>

  Start the explicit invocation of a procedure <br>

 <br>

<span class="stlbold">; </span><br>

  Terminate a procedure invocation or a procedure, (environment) variable or alias declaration. <br>

 <br>

<span class="stlbold">: </span><br>

  Seperate a variable name from its declared type. <br>

 <br>

<span class="stlbold">& </span><br>

  Used to execute a process in the background. <br>

 <br>

<span class="stlunderline">Keywords </span><br>

<span class="stlbold">proc </span><br>

  Used to declare a procedure <br>

 <br>

<span class="stlbold">alias </span><br>

  Used to start the alias-declaration section. <br>

 <br>

<span class="stlbold">env </span><br>

  Used to start the environment-variable-declaration section. <br>

 <br>

<span class="stlbold">export </span><br>

  Used to export a procedure into the Shell. <br>

 <br>

<span class="stlbold">preferred </span><br>

  Used to add an exported function to the "preffered procedures" list. <br>

 <br>

<span class="stlbold">Integer </span><br>

  Used to set a Variables type to Integer <br>

 <br>

<span class="stlbold">String </span><br>

  Used to set a Variables type to String <br>

 <br>

<span class="stlbold">Boolean </span><br>

  Used to set a Variables type to Boolean <br>

 <br>

<span class="stlbold">begin (will be removed (?)) </span><br>

  Used to start a code-block <br>

 <br>

<span class="stlbold">end </span><br>

  Used to terminate a code-block <br>

</div>


</div>


 <br>

<div id="script-syntax">

<h2>Script Syntax </h2>

 <br>

This section specifies the syntax of a deash script. <br>

deash syntax follows the style of Pascal/ALGOL. <br>

 <br>

0. Comments <br>

1. Code-Blocks <br>

2. Variables <br>

3. Conditionals <br>

4. Procedures <br>

 <br>

<div id="comments">

<h3>Comments </h3>

 <br>

Line-Comments are made using a Pound-Sign (#) and block-comments are opened and closed <br>

using curly braces. <br>

 <br>

Example: <span class="stlfraktur"><br>

  # Line comment <br>

  { Block Comment <br>

    very cool <br>

    yes } </span><br>

</div>


<div id="code-blocks">

<h3>Code-Blocks </h3>

 <br>

<span class="stlbold stlcursive">TO BE REMOVED (?) </span><br>

Code blocks in deash are opened using the begin keyword and closed using the end keyword. <br>

 <br>

Example: <span class="stlfraktur"><br>

  begin <br>

    # some code.... <br>

  end </span><br>

</div>


<div id="variables">

<h3>Variables </h3>

 <br>

deash supports Strings (String), Integers (Integer) and Booleans (Boolean). Strings are C-Style, since thats the more based way, <br>

Integers are always Signed 32-Bit. Boolean literals are true and false. <br>

 <br>

Strings are empty, Integers are 0 and Booleans are false by default. <br>

 <br>

Variables are declared using the var keyword and can be either declared for a procedure or an entire <br>

script. If a Variable is not immediatly initialised, its type is to be specified using a colon <br>

followed by the type name. <br>

 <br>

Example: <span class="stlfraktur"><br>

  var <br>

    strvar = ''; <br>

    _strvar: String; <br>

    bool = true; <br>

    _bool: Boolean; <br>

    num = 100; <br>

    _num: Integer;  <br>

  end </span><br>

</div>


<div id="conditionals">

<h3>Conditionals </h3>

 <br>

deash has support for conditional branching which can exclusively be achieved through If-Elif-Else <br>

conditions. These are capable of evaluating integer, boolean and string comparisons. A condition has <br>

to be wrapped inside parenthesis, the then keyword is used to signal the end of conditions and the <br>

start of the code which is to be executed if the conditions are True. <br>

 <br>

Conditionals can be chained using the and keyword and the or keyword, which perform their respective <br>

logical operations on their left and right standing conditions <br>

 <br>

To check if two values are equal a single equals-sign is used, to check if an integer value is <br>

greater or lesser than another the < and > signs are to be used. The equal- and lesse-than signs <br>

can be combined to form the "is not equal"-diamond operator. <br>

 <br>

To negate a condition the not keyword is to be used. <br>

 <br>

An If(-Else(-Elif)) block is to be terminated using the end keyword. <br>

 <br>

Example: <span class="stlfraktur"><br>

  if (bool) and (strvar = '') then <br>

    # do something <br>

  elif (strvar = 'test') then <br>

    # do another thing <br>

  else <br>

    # do a fallback thing  <br>

  end <br>

 <br>

  if (SH_MODE <> MODE_INTERACTIVE) then  <br>

    exit;  <br>

  end </span><br>

</div>


<div id="procedures">

<h3>Procedures </h3>

 <br>

deash supports two kinds of procedures, script-private procedures and <br>

exported procedures. Exported procedures will be stored within the shell <br>

and can be called from other scripts or in the shell. <br>

 <br>

Procedures are declared using the proc keyword, this is to be followed by <br>

the procedures name. If the procedure takes parameters these are to be declared <br>

within parenthesis after the name, seperated by semi-colons. If there are no <br>

parameters, the parenthesis mustn't be added. The declaration is ended with a <br>

semi-colon. <br>

 <br>

Example: <span class="stlfraktur"><br>

  proc Foo; <br>

    echo Bar <br>

  end <br>

 <br>

  proc Bar(writeFoo: Boolean); <br>

    if writeFoo then echo Foo; <br>

  end </span><br>

 <br>

Procedures can be exported using the export modifier behind their declaration. <br>

 <br>

Example: <span class="stlfraktur"><br>

  proc Ping(param: String); export; <br>

    echo >Concat('Pong: ', param); <br>

  end </span><br>

 <br>

deash supports "preferring" procedures over binaries when an invoke is searched, <br>

this is done by adding the preffered modifier behind the declaration. <br>

 <br>

Example: <span class="stlfraktur"><br>

  proc ls; export; preffered; <br>

    exa --color=auto -l <br>

  end; </span><br>

 <br>

deash supports two calling conventions: shell-like and pascal-like. <br>

A shell like call is structured as follows: <span class="stlfraktur"><br>

  < procedure-name > < parameters, space seperated > </span><br>

 <br>

Whereas a pascal-like call is structured like this: <span class="stlfraktur"><br>

  < procedure-name >(< paramters, comma seperated >) </span><br>

 <br>

<span class="stlbold">NOTE: </span><span class="stlitalic">When using the pascal-like calling convention, <br>

the binary search paths as well as aliases are ignored! </span><br>

</div>


</div>


 <br>

<div id="builtin-cmds">

<h2>Built-In Commands and Procedures </h2>

 <br>

This section details all Builtin commands/procedures, their parameters and what they do. <br>

 <br>

builtin-cmds-cmds <br>

<h3>Commands </h3>

<div id="purr">

<h3>purr </h3>

 <br>

purr prints out all <span class="stlitalic">relevant </span>data about the current <br>

shell session. More details can be found at <span class="stlunderline">https://github.com/FelixEcker/deash/blob/master/docs/purr.sad </span><br>

</div>


 <br>

<div id="exec">

<h3>exec </h3>

 <br>

Like bash's exec command, exec will replace the shells process with the specified process and <br>

its parameters. <br>

 <br>

Example: <span class="stlfraktur"><br>

  exec bspwm </span><br>

</div>


 <br>

<div id="exit">

<h3>exit </h3>

 <br>

Terminates the current shell-session. <br>

</div>


</div>


 <br>

<div id="builtin-cmds-procs">

<h3>Procedures </h3>

<div id="paramstr">

<h3>ParamStr </h3>

 <br>

The ParamStr procedure can be used in scripts to access parameters which were passed to it, <br>

it takes a single Integer as its parameter which specifies which parameter to get. <br>

 <br>

The 0th Param is always the path to the script, if the passed number exceeds the number of <br>

parameters an empty string will be returned. <br>

 <br>

<span class="stlbold">Procedure Definition </span><span class="stlfraktur"><br>

  procedure ParamStr(ParamIndex: Integer); export; </span><br>

</div>


</div>


</center></body></html>
